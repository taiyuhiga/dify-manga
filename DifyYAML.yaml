app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: æ¼«ç”»ã§ã‚ã‹ã‚‹AI
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai_tool:0.0.1@be3525b5ffd6f7f7be58a048912edb7822c8835caac366ab164d804459ae76eb
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/gemini:0.2.1@88c1b2c816ef2ea36fc411b35298a621b3260d34bc08bd9357772092728aadde
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1746700539145-source-1746700545903-target
      selected: false
      source: '1746700539145'
      sourceHandle: source
      target: '1746700545903'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1746707845164'
        sourceType: iteration-start
        targetType: llm
      id: 1746707845164start-source-1746707871960-target
      selected: false
      source: 1746707845164start
      sourceHandle: source
      target: '1746707871960'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1746700545903-source-1746708458829-target
      selected: false
      source: '1746700545903'
      sourceHandle: source
      target: '1746708458829'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: iteration
      id: 1746708458829-source-1746707845164-target
      selected: false
      source: '1746708458829'
      sourceHandle: source
      target: '1746707845164'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: 1746707845164-source-1746788803036-target
      selected: false
      source: '1746707845164'
      sourceHandle: source
      target: '1746788803036'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: iteration
      id: 1746788803036-source-1747134201151-target
      source: '1746788803036'
      sourceHandle: source
      target: '1747134201151'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: iteration
        targetType: end
      id: 1747134201151-source-1746701222868-target
      source: '1747134201151'
      sourceHandle: source
      target: '1746701222868'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1747134201151'
        sourceType: iteration-start
        targetType: tool
      id: 1747134201151start-source-1747134234498-target
      source: 1747134201151start
      sourceHandle: source
      target: '1747134234498'
      targetHandle: target
      type: custom
      zIndex: 1002
    nodes:
    - data:
        desc: ''
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - label: user_question
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: user_question
        - label: user_level
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: user_level
      height: 116
      id: '1746700539145'
      position:
        x: 80
        y: 280.21763115836654
      positionAbsolute:
        x: 80
        y: 280.21763115836654
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1746700539145'
          - user_question
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: gemini-2.5-pro-preview-05-06
          provider: langgenius/gemini/google
        prompt_template:
        - id: 370abf98-3b13-460e-8444-9160980d27c7
          role: system
          text: "prompt_template:\n- id: 370abf98-3b13-460e-8444-9160980d27c7\n  role:\
            \ system\n  text: |\n    ã‚ãªãŸã¯æ•™è‚²æ¼«ç”»ã®ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã§ã™ã€‚\n    ä»Šå›ã®ãƒ†ãƒ¼ãƒã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã€Œ{{#1746700539145.user_question#}}ã€ã§ã™ã€‚\n\
            \    ã“ã®ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã€Œ{{#1746700539145.user_level#}}ã€ã®äººãŒç†è§£ã§ãã‚‹ã‚ˆã†ã«ã€ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§èª¬æ˜ã™ã‚‹æ¼«ç”»ã®æ§‹æˆã‚’ä»¥ä¸‹ã®JSONå½¢å¼ã§è¨ˆç”»ã—ã¦ãã ã•ã„ã€‚\n\
            \n    é‡è¦ãªæŒ‡ç¤º:\n    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦ã€åŸºç¤ã‹ã‚‰å¿œç”¨ã¾ã§æ®µéšçš„ã«ç†è§£ã§ãã‚‹ã‚ˆã†ãªæ§‹æˆã«ã—ã¦ãã ã•ã„\n    - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å¤–è¦‹ã¯éå¸¸ã«è©³ç´°ã«è¨˜è¿°ã—ã€ä¸€è²«æ€§ã‚’ä¿ã¤ãŸã‚ã«å¿…è¦ãªå…¨ã¦ã®ç‰¹å¾´ã‚’å«ã‚ã¦ãã ã•ã„\n\
            \    - ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¯é€£ç¶šæ€§ã‚’æŒã¡ã€å‰ã®ã‚³ãƒã®å†…å®¹ã‚’è¸ã¾ãˆã¦æ¬¡ã®ã‚³ãƒãŒå±•é–‹ã™ã‚‹ã‚ˆã†ã«ã—ã¦ãã ã•ã„\n\n    å‡ºåŠ›JSONå½¢å¼:\n\
            \    {\n      \"total_panels\": (ã‚³ãƒã®ç·æ•°ã€æ•´æ•°ã€æœ€ä½20ã‚³ãƒä»¥ä¸Šã€è¤‡é›‘ãªãƒ†ãƒ¼ãƒãªã‚‰50-100ã‚³ãƒ),\n\
            \      \"panel_overviews\": [\n        \"ç¬¬1è©±ï¼šå°å…¥ - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç´¹ä»‹ã¨{{#1746700539145.user_question#}}ã¸ã®ç–‘å•æèµ·\"\
            ,\n        \"ç¬¬2è©±ï¼šåŸºç¤çŸ¥è­˜ - {{#1746700539145.user_question#}}ã®èƒŒæ™¯ã‚„å¿…è¦æ€§ã®èª¬æ˜\"\
            ,\n        \"ç¬¬3è©±ï¼šè©³ç´°èª¬æ˜ - {{#1746700539145.user_question#}}ã®å…·ä½“çš„ãªå†…å®¹\",\n\
            \        // ... æ®µéšçš„ã«ç†è§£ã‚’æ·±ã‚ã‚‹æ§‹æˆã§ã€å¿…ãšã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®é€£ç¶šæ€§ã‚’æŒãŸã›ã‚‹\n      ],\n      \"main_characters\"\
            : [\n        {\n          \"name\": \"çŸ¥è­˜å…ˆç”Ÿ\",\n          \"species\":\
            \ \"human\",\n          \"age\": \"35æ­³\",\n          \"gender\": \"male\"\
            ,\n          \"hair_color\": \"dark brown\",\n          \"hair_style\"\
            : \"short neat side-parted hair\",\n          \"eye_color\": \"deep blue\"\
            ,\n          \"face_shape\": \"oval face with gentle features\",\n   \
            \       \"skin_tone\": \"fair skin\",\n          \"height\": \"175cm tall\"\
            ,\n          \"body_type\": \"average build\",\n          \"clothing\"\
            : \"white lab coat over blue shirt and dark trousers\",\n          \"\
            accessories\": \"round glasses with thin silver frames\",\n          \"\
            distinctive_features\": {\n            \"facial_features\": \"small mole\
            \ on left cheek, friendly smile lines around eyes\",\n            \"voice\"\
            : \"calm and patient tone\",\n            \"mannerisms\": \"often adjusts\
            \ glasses when explaining\"\n          },\n          \"personality\":\
            \ \"patient, knowledgeable, encouraging\",\n          \"role\": \"{{#1746700539145.user_question#}}ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã™ã‚‹æ•™å¸«å½¹\"\
            \n        },\n        {\n          \"name\": \"å­¦ã³å›\",\n          \"species\"\
            : \"human\", \n          \"age\": \"{{#1746700539145.user_level#}}ç›¸å½“\"\
            ,\n          \"gender\": \"male\",\n          \"hair_color\": \"black\"\
            ,\n          \"hair_style\": \"medium length slightly messy hair with\
            \ bangs\",\n          \"eye_color\": \"bright brown\",\n          \"face_shape\"\
            : \"round youthful face\",\n          \"skin_tone\": \"light skin\",\n\
            \          \"height\": \"appropriate for age\",\n          \"body_type\"\
            : \"slim build\",\n          \"clothing\": \"school uniform with white\
            \ shirt and navy blue blazer\",\n          \"accessories\": \"red necktie,\
            \ small backpack\",\n          \"distinctive_features\": {\n         \
            \   \"facial_features\": \"large expressive eyes, small nose, energetic\
            \ expression\",\n            \"voice\": \"curious and enthusiastic\",\n\
            \            \"mannerisms\": \"tilts head when confused, eyes sparkle\
            \ when understanding\"\n          },\n          \"personality\": \"curious,\
            \ eager to learn, sometimes struggles but perseveres\",\n          \"\
            role\": \"{{#1746700539145.user_question#}}ã«ã¤ã„ã¦å­¦ã¶ç”Ÿå¾’å½¹\"\n        }\n  \
            \    ],\n      \"visual_consistency_rules\": {\n        \"art_style\"\
            : \"clear manga style with consistent line weights\",\n        \"color_palette\"\
            : \"bright educational colors with consistent character colors\",\n  \
            \      \"panel_layout\": \"2-4 panels per page for easy reading\",\n \
            \       \"background_style\": \"simple but informative backgrounds that\
            \ support the lesson\"\n      },\n      \"story_arc\": {\n        \"introduction\"\
            : \"panels 1-5: character introduction and problem setup\",\n        \"\
            development\": \"panels 6-40: step-by-step explanation with examples\"\
            ,\n        \"climax\": \"panels 41-45: challenging application or test\"\
            ,\n        \"resolution\": \"panels 46-50: summary and mastery celebration\"\
            \n      },\n      \"educational_progression\": [\n        \"åŸºç¤æ¦‚å¿µã®å°å…¥\"\
            ,\n        \"å…·ä½“ä¾‹ã§ã®èª¬æ˜\", \n        \"æ®µéšçš„ãªè©³ç´°åŒ–\",\n        \"å¿œç”¨ã¨ç™ºå±•\",\n \
            \       \"ã¾ã¨ã‚ã¨ç¢ºèª\"\n      ]\n    }\n\n    æŒ‡ç¤º:\n    - `total_panels` ã¯æœ€ä½20ã‚³ãƒã€ç†æƒ³çš„ã«ã¯50-100ã‚³ãƒã§ã€ãƒˆãƒ”ãƒƒã‚¯ã®è¤‡é›‘ã•ã«å¿œã˜ã¦èª¿æ•´\n\
            \    - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ç‰¹å¾´ã¯ç”»åƒç”ŸæˆAIãŒä¸€è²«ã—ãŸå¤–è¦‹ã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã€æ¥µã‚ã¦è©³ç´°ã«è¨˜è¿°\n    - å„`panel_overview`ã¯å‰ã®ãƒ‘ãƒãƒ«ã‹ã‚‰ã®æµã‚Œã‚’æ„è­˜ã—ã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¨ã—ã¦æˆç«‹ã™ã‚‹ã‚ˆã†ã«\n\
            \    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸèªå½™ã¨èª¬æ˜ã®æ·±ã•ã‚’èª¿æ•´\n\nå‡ºåŠ›ã¯ä¸Šè¨˜ã‚¹ã‚­ãƒ¼ãƒã«å®Œå…¨æº–æ‹ ã—ãŸ **ç´”ç²‹ JSON** ã ã‘ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚å‰å¾Œã®æ–‡ç« ã‚„ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ä¸è¦ã§ã™ã€‚"
        - id: efc68e32-71e6-4874-bb23-b928629b234f
          role: user
          text: 'è³ªå•:{{#1746700539145.user_question#}}

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«: {{#1746700539145.user_level#}}'
        selected: false
        structured_output:
          schema:
            properties:
              educational_progression:
                items:
                  type: string
                type: array
              main_characters:
                items:
                  properties:
                    name:
                      type: string
                  required:
                  - name
                  type: object
                type: array
              overall_style_suggestion:
                type: string
              panel_overviews:
                items:
                  type: string
                type: array
              story_arc:
                properties:
                  phase_overview:
                    type: string
                required:
                - phase_overview
                type: object
              total_panels:
                minimum: 20
                type: integer
              visual_consistency_rules:
                properties:
                  character_style:
                    type: string
                required:
                - character_style
                type: object
            required:
            - total_panels
            - panel_overviews
            type: object
        structured_output_enabled: true
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1746700545903'
      position:
        x: 370.7572851944793
        y: 270.29416380600645
      positionAbsolute:
        x: 370.7572851944793
        y: 270.29416380600645
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1747134201151'
          - output
          variable: text
        selected: false
        title: çµ‚äº†
        type: end
      height: 90
      id: '1746701222868'
      position:
        x: 2283.967114994708
        y: 295.1417343060362
      positionAbsolute:
        x: 2283.967114994708
        y: 295.1417343060362
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        error_handle_mode: terminated
        height: 178
        is_parallel: true
        iterator_selector:
        - '1746708458829'
        - iteration_input_list
        output_selector:
        - '1746707871960'
        - text
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1746707845164start
        title: ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ 2
        type: iteration
        width: 388
      height: 178
      id: '1746707845164'
      position:
        x: 983.8521809021856
        y: 264.41393682793336
      positionAbsolute:
        x: 983.8521809021856
        y: 264.41393682793336
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 388
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1746707845164start
      parentId: '1746707845164'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 1007.8521809021856
        y: 332.41393682793336
      selectable: false
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        context:
          enabled: true
          variable_selector:
          - '1746707845164'
          - item
        desc: ''
        isInIteration: true
        isInLoop: false
        iteration_id: '1746707845164'
        model:
          completion_params: {}
          mode: chat
          name: gemini-2.5-pro-preview-05-06
          provider: langgenius/gemini/google
        prompt_template:
        - id: d77c8fe9-e9f6-4ff3-8e9f-91d3ab701b16
          role: system
          text: "prompt_template:\n- id: d77c8fe9-e9f6-4ff3-8e9f-91d3ab701b16\n  role:\
            \ system\n  text: |\n    ã‚ãªãŸã¯æ•™è‚²æ¼«ç”»ã®ã€1ã‚³ãƒåˆ†ã€‘ã®ã‚·ãƒŠãƒªã‚ªãƒ©ã‚¤ã‚¿ãƒ¼å…¼ã‚¤ãƒ©ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã™ã€‚\n    ä»¥ä¸‹ã®æƒ…å ±ã«åŸºã¥ã„ã¦ã€æŒ‡å®šã•ã‚ŒãŸJSONå½¢å¼ã§ã€ã“ã®1ã‚³ãƒåˆ†ã ã‘ã€‘ã®æ¼«ç”»ãƒ‘ãƒãƒ«æƒ…å ±ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚\n\
            \n    ç¾åœ¨ã®æƒ…å ±:\n    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•: {{#1746700539145.user_question#}}\n    -\
            \ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«: {{#1746700539145.user_level#}}\n    - ã“ã®ã‚³ãƒã®ç•ªå·: {{item.panel_number}}\n\
            \    - å…¨ä½“ã®é€²è¡ŒçŠ¶æ³: {{item.progress_percentage}}%\n    - ç¾åœ¨ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ•ã‚§ãƒ¼ã‚º: {{item.story_phase}}\n\
            \    - ã“ã®ã‚³ãƒã§æãã¹ãæ¦‚è¦: {{item.panel_overview}}\n    - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°æƒ…å ±: {{item.main_characters_json_string}}\n\
            \    - ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ä¸€è²«æ€§ãƒ«ãƒ¼ãƒ«: {{item.visual_consistency_rules}}\n    \n    {{#if\
            \ item.previous_panels_json_string}}\n    ç›´å‰ã®ãƒ‘ãƒãƒ«ã®æµã‚Œ:\n    {{item.previous_panels_json_string}}\n\
            \    {{/if}}\n\n    // å‡ºåŠ›JSONãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:\n    {\n      \"panel_id\": {{item.panel_number}},\n\
            \      \"scene_description\": \"ï¼ˆã‚·ãƒ¼ãƒ³ã®è©³ç´°ãªæå†™ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®é…ç½®ã€èƒŒæ™¯è¦ç´ ï¼‰\",\n      \"\
            camera_angle\": \"ï¼ˆä¾‹: medium shot, close-up, wide angle, bird's eye viewï¼‰\"\
            ,\n      \"lighting\": \"ï¼ˆä¾‹: bright classroom lighting, soft afternoon\
            \ sunï¼‰\",\n      \"characters\": [\n        {\n          \"name\": \"\
            ï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åï¼‰\",\n          // â˜…â˜…â˜… main_charactersã‹ã‚‰å…¨ã¦ã®å¤–è¦‹çš„ç‰¹å¾´ã‚’æ­£ç¢ºã«ã‚³ãƒ”ãƒ¼ â˜…â˜…â˜…\n\
            \          \"species\": \"ï¼ˆå¿…é ˆï¼‰\",\n          \"hair_color\": \"ï¼ˆå¿…é ˆï¼‰\"\
            , \n          \"hair_style\": \"ï¼ˆå¿…é ˆï¼‰\",\n          \"eye_color\": \"ï¼ˆå¿…é ˆï¼‰\"\
            ,\n          \"face_shape\": \"ï¼ˆå¿…é ˆï¼‰\",\n          \"skin_tone\": \"ï¼ˆå¿…é ˆï¼‰\"\
            ,\n          \"height\": \"ï¼ˆå¿…é ˆï¼‰\",\n          \"body_type\": \"ï¼ˆå¿…é ˆï¼‰\"\
            ,\n          \"clothing\": \"ï¼ˆå¿…é ˆã€ã‚·ãƒ¼ãƒ³ã«å¿œã˜ã¦å¾®èª¿æ•´å¯ï¼‰\",\n          \"accessories\"\
            : \"ï¼ˆå¿…é ˆï¼‰\",\n          \"distinctive_features\": \"ï¼ˆå¿…é ˆã€é¡”ã®ç‰¹å¾´ã‚’è©³ç´°ã«ï¼‰\",\n\
            \          // ã“ã®ã‚³ãƒç‰¹æœ‰ã®æƒ…å ±\n          \"pose\": \"ï¼ˆå…·ä½“çš„ãªãƒãƒ¼ã‚ºã€ä¾‹: sitting at\
            \ desk writing notesï¼‰\",\n          \"expression\": \"ï¼ˆå…·ä½“çš„ãªè¡¨æƒ…ã€ä¾‹: concentrated\
            \ frown while thinkingï¼‰\",\n          \"action\": \"ï¼ˆç¾åœ¨ã®è¡Œå‹•ï¼‰\",\n     \
            \     \"position_in_frame\": \"ï¼ˆãƒ•ãƒ¬ãƒ¼ãƒ å†…ã®ä½ç½®ã€ä¾‹: left side, centerï¼‰\"\n   \
            \     }\n      ],\n      \"background_elements\": [\n        {\n     \
            \     \"element\": \"ï¼ˆèƒŒæ™¯è¦ç´ åï¼‰\",\n          \"description\": \"ï¼ˆè©³ç´°ãªèª¬æ˜ï¼‰\"\
            ,\n          \"position\": \"ï¼ˆé…ç½®ï¼‰\"\n        }\n      ],\n      \"speech_bubbles\"\
            : [\n        {\n          \"character\": \"ï¼ˆè©±è€…åï¼‰\",\n          \"text\"\
            : \"ï¼ˆ5-15æ–‡å­—ã®çŸ­ã„ã‚»ãƒªãƒ•ï¼‰\",\n          \"emotion\": \"ï¼ˆæ„Ÿæƒ…ã€ä¾‹: curious, excited,\
            \ confusedï¼‰\",\n          \"bubble_style\": \"ï¼ˆä¾‹: normal, thought, shoutï¼‰\"\
            ,\n          \"position\": \"ï¼ˆå¹ãå‡ºã—ã®ä½ç½®ï¼‰\"\n        }\n      ],\n      \"\
            educational_elements\": [\n        {\n          \"type\": \"ï¼ˆä¾‹: diagram,\
            \ text_box, arrowï¼‰\",\n          \"content\": \"ï¼ˆæ•™è‚²çš„å†…å®¹ï¼‰\",\n         \
            \ \"position\": \"ï¼ˆé…ç½®ï¼‰\"\n        }\n      ],\n      \"panel_transitions\"\
            : {\n        \"from_previous\": \"ï¼ˆå‰ã®ã‚³ãƒã‹ã‚‰ã®ç¹‹ãŒã‚Šæ–¹ï¼‰\",\n        \"to_next\"\
            : \"ï¼ˆæ¬¡ã®ã‚³ãƒã¸ã®ä¼ç·šï¼‰\"\n      }\n    }\n\n    é‡è¦ãªæŒ‡ç¤º:\n    - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®å¤–è¦‹ã¯ main_characters\
            \ ã®å®šç¾©ã‚’å®Œå…¨ã«ç¶­æŒã—ã€ä¸€è²«æ€§ã‚’ä¿ã¤\n    - ã‚»ãƒªãƒ•ã¯æ¥µã‚ã¦çŸ­ãã€è‡ªç„¶ãªä¼šè©±ã«ãªã‚‹ã‚ˆã†ã«\n    - å‰ã®ãƒ‘ãƒãƒ«ã‹ã‚‰ã®æµã‚Œã‚’æ„è­˜ã—ã€ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®é€£ç¶šæ€§ã‚’ä¿ã¤\n\
            \    - æ•™è‚²çš„å†…å®¹ã¯è¦–è¦šçš„è¦ç´ ã¨çŸ­ã„ã‚»ãƒªãƒ•ã§åŠ¹æœçš„ã«ä¼ãˆã‚‹\n    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã«é©ã—ãŸè¡¨ç¾ã‚’ä½¿ç”¨"
        - id: 951bf6ce-f278-421e-bcbe-b14a4895cf94
          role: user
          text: '{{#1746700539145.user_question#}}

            {{#1746700539145.user_level#}}

            {{#1746708458829.overall_style_output#}}

            {{#1746707845164.index#}}

            {{#1746707845164.item#}}

            {{#1746700545903.text#}}'
        selected: false
        title: LLM 2
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1746707871960'
      parentId: '1746707845164'
      position:
        x: 126.86339869177027
        y: 65.31423751592655
      positionAbsolute:
        x: 1110.715579593956
        y: 329.7281743438599
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import json\nimport re\n\ndef main(planning_json_string: str, user_question_input:\
          \ str = None, user_level_input: str = None) -> dict:\n    \"\"\"\n    Parameters\n\
          \    ----------\n    planning_json_string      : str  è¨ˆç”»ãƒ•ã‚§ãƒ¼ã‚º LLM ã® JSON\
          \ æ–‡å­—åˆ—\n    user_question_input       : str  é–‹å§‹ãƒãƒ¼ãƒ‰ã‹ã‚‰æ¸¡ã™è³ªå•æ–‡ï¼ˆä»»æ„ï¼‰\n    user_level_input\
          \          : str  é–‹å§‹ãƒãƒ¼ãƒ‰ã‹ã‚‰æ¸¡ã™å­¦å¹´ / é›£æ˜“åº¦ï¼ˆä»»æ„ï¼‰\n    \"\"\"\n    \n    # ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’mainå†…ã§å®šç¾©\n\
          \    def determine_story_phase(panel_num: int, total_panels: int, story_arc:\
          \ dict) -> str:\n        \"\"\"ãƒ‘ãƒãƒ«ç•ªå·ã‹ã‚‰ç‰©èªã®ãƒ•ã‚§ãƒ¼ã‚ºã‚’åˆ¤å®š\"\"\"\n        progress\
          \ = panel_num / total_panels\n        \n        if progress <= 0.1:\n  \
          \          return \"introduction\"\n        elif progress <= 0.8:\n    \
          \        return \"development\"\n        elif progress <= 0.9:\n       \
          \     return \"climax\"\n        else:\n            return \"resolution\"\
          \n    \n    # ------ 1) å…¥åŠ›ã®å–å¾— ------\n    if not planning_json_string:\n\
          \        return {\n            \"error\": \"planning_json_string ãŒæ¸¡ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\"\
          ,\n            \"iteration_input_list\": [],\n            \"overall_style_output\"\
          : \"default comic style\"\n        }\n\n    # ------ ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®é™¤å»å‡¦ç†\
          \ ------\n    match = re.search(r\"```(?:json)?\\s*([\\s\\S]*?)\\s*```\"\
          , planning_json_string)\n    if match:\n        cleaned_json_str = match.group(1).strip()\n\
          \    else:\n        cleaned_json_str = planning_json_string.strip()\n  \
          \  \n    # ------ 2) JSON è§£æ ------\n    try:\n        plan_data = json.loads(cleaned_json_str)\n\
          \    except json.JSONDecodeError as e:\n        return {\n            \"\
          error\": f\"Planning JSON ã®ãƒ‘ãƒ¼ã‚¹ã«å¤±æ•—: {e}\",\n            \"cleaned_input_attempt\"\
          : cleaned_json_str,\n            \"raw_input\": planning_json_string,\n\
          \            \"iteration_input_list\": [],\n            \"overall_style_output\"\
          : \"default comic style\"\n        }\n\n    # ãƒ‡ãƒ¼ã‚¿ã®å–å¾—\n    total_panels =\
          \ plan_data.get(\"total_panels\", 0)\n    panel_overviews = plan_data.get(\"\
          panel_overviews\", [])\n    main_characters_info = plan_data.get(\"main_characters\"\
          , [])\n    visual_consistency_rules = plan_data.get(\"visual_consistency_rules\"\
          , {})\n    story_arc = plan_data.get(\"story_arc\", {})\n    \n    # overall_style\
          \ ã‚’å–å¾—ã¾ãŸã¯ç”Ÿæˆ\n    if \"overall_style_suggestion\" in plan_data:\n        overall_style\
          \ = plan_data.get(\"overall_style_suggestion\", \"default comic style\"\
          )\n    elif isinstance(visual_consistency_rules, dict):\n        art_style\
          \ = visual_consistency_rules.get('art_style', 'manga style')\n        color_palette\
          \ = visual_consistency_rules.get('color_palette', 'bright colors')\n   \
          \     overall_style = f\"{art_style}, {color_palette}\"\n    else:\n   \
          \     overall_style = \"clear manga style, bright educational colors\"\n\
          \n    # ------ 3) å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ ------\n    if not isinstance(total_panels, int)\
          \ or total_panels <= 0:\n        return {\n            \"error\": f\"'total_panels'={total_panels}\
          \ ã¯ 1 ä»¥ä¸Šã®æ•´æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\",\n            \"iteration_input_list\": [],\n \
          \           \"overall_style_output\": overall_style\n        }\n\n    if\
          \ len(panel_overviews) != total_panels:\n        return {\n            \"\
          error\": f\"ç·ãƒ‘ãƒãƒ«æ•° {total_panels} ã¨ panel_overviews ã®é•·ã• {len(panel_overviews)}\
          \ ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚\",\n            \"iteration_input_list\": [],\n            \"\
          overall_style_output\": overall_style\n        }\n\n    # ------ 4) å¤‰æ›å‡¦ç†\
          \ ------\n    iteration_items = []\n    \n    # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±ã‚’JSONæ–‡å­—åˆ—ã«å¤‰æ›\n  \
          \  if main_characters_info is None or not isinstance(main_characters_info,\
          \ list):\n        characters_json = json.dumps([], ensure_ascii=False)\n\
          \    else:\n        characters_json = json.dumps(main_characters_info, ensure_ascii=False)\n\
          \    \n    # å‰ã®ãƒ‘ãƒãƒ«ã®æƒ…å ±ã‚’ä¿æŒã™ã‚‹å¤‰æ•°\n    previous_panels_json = []\n    \n    for\
          \ idx in range(total_panels):\n        # ç¾åœ¨ã®ãƒ‘ãƒãƒ«ã®æƒ…å ±\n        current_panel_info\
          \ = {\n            \"panel_number\": idx + 1,\n            \"panel_overview\"\
          : panel_overviews[idx] if idx < len(panel_overviews) else \"No overview\
          \ available\",\n            \"main_characters_json_string\": characters_json,\n\
          \            \"overall_style\": overall_style,\n            \"user_question\"\
          : user_question_input if user_question_input else \"\",\n            \"\
          user_level\": user_level_input if user_level_input else \"\",\n        \
          \    \"visual_consistency_rules\": json.dumps(visual_consistency_rules,\
          \ ensure_ascii=False) if visual_consistency_rules else \"{}\",\n       \
          \     \"story_arc\": json.dumps(story_arc, ensure_ascii=False) if story_arc\
          \ else \"{}\",\n            \"previous_panel_json_string\": json.dumps(previous_panels_json[-3:],\
          \ ensure_ascii=False) if previous_panels_json else \"\",\n            \"\
          progress_percentage\": round((idx + 1) / total_panels * 100, 1),\n     \
          \       \"story_phase\": determine_story_phase(idx + 1, total_panels, story_arc)\n\
          \        }\n        \n        iteration_items.append(current_panel_info)\n\
          \        \n        # ã“ã®ãƒ‘ãƒãƒ«ã®æ¦‚è¦ã‚’å±¥æ­´ã«è¿½åŠ \n        previous_panels_json.append({\n\
          \            \"panel_id\": idx + 1,\n            \"overview\": panel_overviews[idx]\
          \ if idx < len(panel_overviews) else \"\"\n        })\n\n    # ------ 5)\
          \ å‡ºåŠ› ------\n    return {\n        \"iteration_input_list\": iteration_items,\n\
          \        \"overall_style_output\": overall_style\n    }"
        code_language: python3
        desc: ''
        outputs:
          iteration_input_list:
            children: null
            type: array[object]
          overall_style_output:
            children: null
            type: string
        selected: false
        title: è¨ˆç”»JSONãƒ‘ãƒ¼ã‚¹ç”¨
        type: code
        variables:
        - value_selector:
          - '1746700545903'
          - text
          variable: planning_json_string
        - value_selector:
          - '1746700539145'
          - user_question
          variable: user_question_input
        - value_selector:
          - '1746700539145'
          - user_level
          variable: user_level_input
      height: 54
      id: '1746708458829'
      position:
        x: 676.0320656468683
        y: 270.29416380600645
      positionAbsolute:
        x: 676.0320656468683
        y: 270.29416380600645
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport re\n\ndef main(panel_jsons_input) -> dict:\n  \
          \  \"\"\"\n    Parameters\n    ----------\n    panel_jsons_input : ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒ‰ã‹ã‚‰ã®ãƒ‘ãƒãƒ«JSONæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆ\n\
          \    \"\"\"\n    \n    # ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’mainå†…ã§å®šç¾©\n    def construct_image_prompt_from_panel_dict(panel_data:\
          \ dict, overall_style: str) -> str:\n        \"\"\"\n        1ãƒ‘ãƒãƒ«åˆ†ã®è¾æ›¸ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€ç”»åƒç”Ÿæˆç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ–‡å­—åˆ—ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã€‚\n\
          \        \"\"\"\n        if not isinstance(panel_data, dict):\n        \
          \    return \"Error: Invalid panel_data, expected a dictionary.\"\n\n  \
          \      parts = []\n        \n        # ãƒ‘ãƒãƒ«ç•ªå·ã‚’å«ã‚ã‚‹\n        panel_id = panel_data.get(\"\
          panel_id\", \"unknown\")\n        parts.append(f\"Educational manga panel\
          \ {panel_id}\")\n        \n        # ã‚·ãƒ¼ãƒ³èª¬æ˜\n        scene_desc = panel_data.get(\"\
          scene_description\", panel_data.get(\"description\", \"\"))\n        if\
          \ scene_desc:\n            parts.append(f\"Scene: {scene_desc}\")\n    \
          \    \n        # ã‚«ãƒ¡ãƒ©ã‚¢ãƒ³ã‚°ãƒ«ã¨ç…§æ˜\n        camera = panel_data.get(\"camera_angle\"\
          , \"medium shot\")\n        lighting = panel_data.get(\"lighting\", \"bright\
          \ clear lighting\")\n        parts.append(f\"Camera: {camera}, Lighting:\
          \ {lighting}\")\n        \n        # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æƒ…å ±\n        character_prompts\
          \ = []\n        for char_info in panel_data.get(\"characters\", []):\n \
          \           if not isinstance(char_info, dict):\n                continue\n\
          \            \n            char_parts = []\n            name = char_info.get(\"\
          name\", \"character\")\n            \n            # åŸºæœ¬æƒ…å ±ã®æ§‹ç¯‰\n          \
          \  char_parts.append(f\"Character '{name}'\")\n            \n          \
          \  # å¤–è¦‹æƒ…å ±\n            if char_info.get('species'):\n                char_parts.append(f\"\
          appearance: {char_info.get('species')}\")\n            if char_info.get('hair_style')\
          \ and char_info.get('hair_color'):\n                char_parts.append(f\"\
          with {char_info.get('hair_style')} in {char_info.get('hair_color')}\")\n\
          \            if char_info.get('eye_color'):\n                char_parts.append(f\"\
          {char_info.get('eye_color')} eyes\")\n            if char_info.get('clothing'):\n\
          \                char_parts.append(f\"wearing {char_info.get('clothing')}\"\
          )\n            if char_info.get('accessories'):\n                char_parts.append(f\"\
          with {char_info.get('accessories')}\")\n            \n            # ç‰¹å¾´çš„ãªè¦ç´ \n\
          \            features = char_info.get('features', char_info.get('distinctive_features'))\n\
          \            if features:\n                char_parts.append(f\"distinctive\
          \ features: {features}\")\n            \n            # ãƒãƒ¼ã‚ºã¨è¡¨æƒ…\n        \
          \    if char_info.get('pose'):\n                char_parts.append(f\"pose:\
          \ {char_info.get('pose')}\")\n            if char_info.get('expression'):\n\
          \                char_parts.append(f\"expression: {char_info.get('expression')}\"\
          )\n            \n            character_prompts.append(\", \".join(filter(None,\
          \ char_parts)))\n        \n        if character_prompts:\n            parts.append(\"\
          Characters: \" + \"; \".join(character_prompts))\n        \n        # èƒŒæ™¯\n\
          \        backgrounds = panel_data.get(\"background\", [])\n        if backgrounds\
          \ and isinstance(backgrounds, list):\n            valid_backgrounds = [str(bg)\
          \ for bg in backgrounds if bg]\n            if valid_backgrounds:\n    \
          \            parts.append(f\"Background: {', '.join(valid_backgrounds)}\"\
          )\n        \n        # ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ\n        visual_effects = panel_data.get(\"\
          visual_effects\", [])\n        if visual_effects and isinstance(visual_effects,\
          \ list):\n            valid_effects = [str(ve) for ve in visual_effects\
          \ if ve]\n            if valid_effects:\n                parts.append(\"\
          Visual effects: \" + \", \".join(valid_effects))\n        \n        # åŠ¹æœéŸ³\n\
          \        sfx_list = panel_data.get(\"sfx\", [])\n        if sfx_list and\
          \ isinstance(sfx_list, list):\n            sfx_texts = []\n            for\
          \ sfx in sfx_list:\n                if isinstance(sfx, dict) and sfx.get(\"\
          text\"):\n                    sfx_texts.append(sfx.get(\"text\"))\n    \
          \            elif isinstance(sfx, str):\n                    sfx_texts.append(sfx)\n\
          \            if sfx_texts:\n                parts.append(f\"Sound effects:\
          \ {', '.join(sfx_texts)}\")\n        \n        # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®çµ„ã¿ç«‹ã¦\n        final_prompt\
          \ = \". \".join(filter(None, parts))\n        \n        # ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ \n     \
          \   style_to_use = overall_style if overall_style else \"anime comic style,\
          \ clear lines, vibrant colors\"\n        final_prompt += f\". Style: {style_to_use}.\
          \ Aspect ratio 2:3. Consistent character design across all panels.\"\n \
          \       \n        return final_prompt.strip()\n    \n    # ãƒ¡ã‚¤ãƒ³å‡¦ç†é–‹å§‹\n   \
          \ panel_json_strings_list = []\n    \n    # å…¥åŠ›ã®å‡¦ç†\n    if isinstance(panel_jsons_input,\
          \ dict) and \"output\" in panel_jsons_input:\n        panel_json_strings_list\
          \ = panel_jsons_input.get(\"output\", [])\n    elif isinstance(panel_jsons_input,\
          \ list):\n        panel_json_strings_list = panel_jsons_input\n    else:\n\
          \        return {\n            \"error\": \"Input 'panel_jsons_input' is\
          \ missing or not in expected format.\",\n            \"image_generation_prompts_list\"\
          : [],\n            \"debug_parsed_panels\": []\n        }\n    \n    # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ\n\
          \    image_prompts = []\n    parsed_panel_data_for_debug = []\n    \n  \
          \  for index, panel_json_str_raw in enumerate(panel_json_strings_list):\n\
          \        if not isinstance(panel_json_str_raw, str):\n            error_detail\
          \ = f\"Item at index {index} is not a string\"\n            image_prompts.append(f\"\
          Error: {error_detail}\")\n            parsed_panel_data_for_debug.append({\"\
          error\": error_detail})\n            continue\n        \n        # ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®é™¤å»\n\
          \        match = re.search(r\"```(?:json)?\\s*([\\s\\S]*?)\\s*```\", panel_json_str_raw)\n\
          \        if match:\n            cleaned_json_str = match.group(1).strip()\n\
          \        else:\n            cleaned_json_str = panel_json_str_raw.strip()\n\
          \        \n        try:\n            panel_data = json.loads(cleaned_json_str)\n\
          \            if not isinstance(panel_data, dict):\n                raise\
          \ ValueError(\"Parsed data is not a dictionary\")\n            \n      \
          \      parsed_panel_data_for_debug.append(panel_data)\n            \n  \
          \          # overall_styleã®å–å¾—\n            overall_style = panel_data.get(\"\
          overall_style\", \"manga style, bright colors\")\n            \n       \
          \     # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ\n            img_prompt = construct_image_prompt_from_panel_dict(panel_data,\
          \ overall_style)\n            image_prompts.append(img_prompt)\n       \
          \     \n        except Exception as e:\n            error_detail = f\"Error\
          \ at index {index}: {str(e)}\"\n            image_prompts.append(error_detail)\n\
          \            parsed_panel_data_for_debug.append({\"error\": error_detail})\n\
          \    \n    return {\n        \"image_generation_prompts_list\": image_prompts,\n\
          \        \"debug_parsed_panels\": parsed_panel_data_for_debug\n    }"
        code_language: python3
        desc: ''
        outputs:
          debug_parsed_panels:
            children: null
            type: array[object]
          image_generation_prompts_list:
            children: null
            type: array[string]
        selected: false
        title: ç”»åƒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆçµ„ã¿ç«‹ã¦
        type: code
        variables:
        - value_selector:
          - '1746707845164'
          - output
          variable: panel_jsons_input
      height: 54
      id: '1746788803036'
      position:
        x: 1410.9084354875936
        y: 295.1417343060362
      positionAbsolute:
        x: 1410.9084354875936
        y: 295.1417343060362
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        error_handle_mode: terminated
        height: 334
        is_parallel: true
        iterator_selector:
        - '1746788803036'
        - image_generation_prompts_list
        output_selector:
        - '1747134234498'
        - files
        output_type: array[file]
        parallel_nums: 10
        selected: false
        start_node_id: 1747134201151start
        title: ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ 2
        type: iteration
        width: 388
      height: 334
      id: '1747134201151'
      position:
        x: 1734.7759841064933
        y: 280.21763115836654
      positionAbsolute:
        x: 1734.7759841064933
        y: 280.21763115836654
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 388
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1747134201151start
      parentId: '1747134201151'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 1758.7759841064933
        y: 348.21763115836654
      selectable: false
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        isInLoop: false
        is_team_authorization: true
        iteration_id: '1747134201151'
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Detailed description of the image you want to generate (max 32000
              chars). Check the official OpenAI documentation for GPT Image.
            ja_JP: Detailed description of the image you want to generate (max 32000
              chars). Check the official OpenAI documentation for GPT Image.
            pt_BR: DescriÃ§Ã£o detalhada da imagem que vocÃª deseja gerar (mÃ¡x 32000
              chars). Verifique a documentaÃ§Ã£o oficial da OpenAI para GPT Image.
            zh_Hans: æ‚¨æƒ³è¦ç”Ÿæˆçš„å›¾åƒçš„è¯¦ç»†æè¿°ï¼ˆæœ€å¤š 32000 å­—ç¬¦ï¼‰ã€‚è¯·æŸ¥çœ‹ GPT Image çš„ OpenAI å®˜æ–¹æ–‡æ¡£ã€‚
          label:
            en_US: Prompt
            ja_JP: Prompt
            pt_BR: Prompt
            zh_Hans: æç¤ºè¯
          llm_description: Detailed image prompt for GPT Image (max 32000 characters).
            Describe the desired image clearly.
          max: null
          min: null
          name: prompt
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: auto
          form: form
          human_description:
            en_US: Select the image size
            ja_JP: Select the image size
            pt_BR: Selecione o tamanho da imagem
            zh_Hans: é€‰æ‹©å›¾åƒå¤§å°
          label:
            en_US: Image size
            ja_JP: Image size
            pt_BR: Tamanho da imagem
            zh_Hans: å›¾åƒå¤§å°
          llm_description: ''
          max: null
          min: null
          name: size
          options:
          - label:
              en_US: Auto
              ja_JP: Auto
              pt_BR: AutomÃ¡tico
              zh_Hans: è‡ªåŠ¨
            value: auto
          - label:
              en_US: Square (1024x1024)
              ja_JP: Square (1024x1024)
              pt_BR: Quadrado (1024x1024)
              zh_Hans: æ–¹å½¢ (1024x1024)
            value: 1024x1024
          - label:
              en_US: Portrait (1024x1536)
              ja_JP: Portrait (1024x1536)
              pt_BR: Retrato (1024x1536)
              zh_Hans: ç«–å±/è‚–åƒ (1024x1536)
            value: 1024x1536
          - label:
              en_US: Landscape (1536x1024)
              ja_JP: Landscape (1536x1024)
              pt_BR: Paisagem (1536x1024)
              zh_Hans: æ¨ªå±/é£æ™¯ (1536x1024)
            value: 1536x1024
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        - auto_generate: null
          default: 1
          form: form
          human_description:
            en_US: Number of images to generate (Must be less than 10).
            ja_JP: Number of images to generate (Must be less than 10).
            pt_BR: NÃºmero de imagens a gerar (Deve ser menor que 10).
            zh_Hans: è¦ç”Ÿæˆçš„å›¾åƒæ•°é‡ï¼ˆå¿…é¡»å°äº 10ï¼‰ã€‚
          label:
            en_US: Number of images
            ja_JP: Number of images
            pt_BR: NÃºmero de imagens
            zh_Hans: å›¾åƒæ•°é‡
          llm_description: ''
          max: 10
          min: 1
          name: n
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: auto
          form: form
          human_description:
            en_US: Select the image quality
            ja_JP: Select the image quality
            pt_BR: Selecione a qualidade da imagem
            zh_Hans: é€‰æ‹©å›¾åƒè´¨é‡
          label:
            en_US: Image quality
            ja_JP: Image quality
            pt_BR: Qualidade da imagem
            zh_Hans: å›¾åƒè´¨é‡
          llm_description: ''
          max: null
          min: null
          name: quality
          options:
          - label:
              en_US: Auto
              ja_JP: Auto
              pt_BR: AutomÃ¡tico
              zh_Hans: è‡ªåŠ¨
            value: auto
          - label:
              en_US: Low
              ja_JP: Low
              pt_BR: Baixa
              zh_Hans: ä½
            value: low
          - label:
              en_US: Medium
              ja_JP: Medium
              pt_BR: MÃ©dia
              zh_Hans: ä¸­
            value: medium
          - label:
              en_US: High
              ja_JP: High
              pt_BR: Alta
              zh_Hans: é«˜
            value: high
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        - auto_generate: null
          default: auto
          form: form
          human_description:
            en_US: Select the image background type. Transparent requires PNG or WebP
              format and works best with medium/high quality.
            ja_JP: Select the image background type. Transparent requires PNG or WebP
              format and works best with medium/high quality.
            pt_BR: Selecione o tipo de fundo da imagem. Fundo transparente requer
              formato PNG ou WebP e funciona melhor com qualidade mÃ©dia/alta.
            zh_Hans: é€‰æ‹©å›¾åƒèƒŒæ™¯ç±»å‹ã€‚é€æ˜èƒŒæ™¯éœ€è¦ PNG æˆ– WebP æ ¼å¼ï¼Œå¹¶ä¸”æœ€é€‚ç”¨äºä¸­/é«˜è´¨é‡ã€‚
          label:
            en_US: Background
            ja_JP: Background
            pt_BR: Fundo
            zh_Hans: èƒŒæ™¯
          llm_description: ''
          max: null
          min: null
          name: background
          options:
          - label:
              en_US: Auto
              ja_JP: Auto
              pt_BR: AutomÃ¡tico
              zh_Hans: è‡ªåŠ¨
            value: auto
          - label:
              en_US: Opaque
              ja_JP: Opaque
              pt_BR: Opaco
              zh_Hans: ä¸é€æ˜
            value: opaque
          - label:
              en_US: Transparent
              ja_JP: Transparent
              pt_BR: Transparente
              zh_Hans: é€æ˜
            value: transparent
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        - auto_generate: null
          default: auto
          form: form
          human_description:
            en_US: Select the output image format.
            ja_JP: Select the output image format.
            pt_BR: Selecione o formato da imagem de saÃ­da.
            zh_Hans: é€‰æ‹©è¾“å‡ºå›¾åƒæ ¼å¼ã€‚
          label:
            en_US: Output Format
            ja_JP: Output Format
            pt_BR: Formato de SaÃ­da
            zh_Hans: è¾“å‡ºæ ¼å¼
          llm_description: ''
          max: null
          min: null
          name: output_format
          options:
          - label:
              en_US: Auto
              ja_JP: Auto
              pt_BR: AutomÃ¡tico
              zh_Hans: è‡ªåŠ¨
            value: auto
          - label:
              en_US: PNG
              ja_JP: PNG
              pt_BR: PNG
              zh_Hans: PNG
            value: png
          - label:
              en_US: JPEG
              ja_JP: JPEG
              pt_BR: JPEG
              zh_Hans: JPEG
            value: jpeg
          - label:
              en_US: WebP
              ja_JP: WebP
              pt_BR: WebP
              zh_Hans: WebP
            value: webp
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        - auto_generate: null
          default: 100
          form: form
          human_description:
            en_US: Set compression level (0-100) for JPEG/WebP formats.
            ja_JP: Set compression level (0-100) for JPEG/WebP formats.
            pt_BR: Defina o nÃ­vel de compressÃ£o (0-100) para formatos JPEG/WebP.
            zh_Hans: è®¾ç½® JPEG/WebP æ ¼å¼çš„å‹ç¼©çº§åˆ«ï¼ˆ0-100ï¼‰ã€‚
          label:
            en_US: Output Compression
            ja_JP: Output Compression
            pt_BR: CompressÃ£o de SaÃ­da
            zh_Hans: è¾“å‡ºå‹ç¼©
          llm_description: ''
          max: 100
          min: 0
          name: output_compression
          options: []
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: number
        - auto_generate: null
          default: auto
          form: form
          human_description:
            en_US: Control content moderation level.
            ja_JP: Control content moderation level.
            pt_BR: Controle o nÃ­vel de moderaÃ§Ã£o de conteÃºdo.
            zh_Hans: æ§åˆ¶å†…å®¹å®¡æ ¸çº§åˆ«ã€‚
          label:
            en_US: Moderation
            ja_JP: Moderation
            pt_BR: ModeraÃ§Ã£o
            zh_Hans: å†…å®¹å®¡æ ¸
          llm_description: ''
          max: null
          min: null
          name: moderation
          options:
          - label:
              en_US: Auto
              ja_JP: Auto
              pt_BR: AutomÃ¡tico
              zh_Hans: è‡ªåŠ¨
            value: auto
          - label:
              en_US: Low
              ja_JP: Low
              pt_BR: Baixo
              zh_Hans: ä½
            value: low
          placeholder: null
          precision: null
          required: false
          scope: null
          template: null
          type: select
        params:
          background: ''
          moderation: ''
          n: ''
          output_compression: ''
          output_format: ''
          prompt: ''
          quality: ''
          size: ''
        provider_id: langgenius/openai_tool/openai
        provider_name: langgenius/openai_tool/openai
        provider_type: builtin
        selected: false
        title: GPT Image Generate
        tool_configurations:
          background: auto
          moderation: auto
          n: 1
          output_compression: 100
          output_format: auto
          quality: auto
          size: 1024x1536
        tool_description: GPT Image Generate (gpt-image-1) is a text to image generation
          tool
        tool_label: GPT Image Generate
        tool_name: gpt_image_generate
        tool_parameters:
          prompt:
            type: mixed
            value: '{{#1747134201151.item#}}'
        type: tool
      height: 246
      id: '1747134234498'
      parentId: '1747134201151'
      position:
        x: 126.28972386542591
        y: 68
      positionAbsolute:
        x: 1861.0657079719192
        y: 348.21763115836654
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    viewport:
      x: -149.95877676932264
      y: 84.81371239710143
      zoom: 0.4967556237728489
